<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:sec="https://www.thymeleaf.org/extras/spring-security">
<head th:replace="fragments/head :: head('Copy Form')"></head>
<body>
<div th:replace="fragments/nav :: nav"></div>
<div class="container">
    <h3 class="mb-3">Copy</h3>
    <form method="post" th:action="${copy.id} == null ? '/copies/create?bookId=' + ${copy.book.id} : '/copies/' + ${copy.id} + '/edit'">
        <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />
        <div class="mb-3">
            <label class="form-label">Barcode</label>
            <input class="form-control" type="text" name="barcode" th:value="${copy.barcode}" required />
        </div>
        <div class="mb-3">
            <label class="form-label">Status</label>
            <select class="form-select" name="status">
                <option th:each="s : ${statuses}" th:value="${s}" th:text="${s}" th:selected="${copy.status == s}"></option>
            </select>
        </div>
        <input type="hidden" name="book.id" th:value="${copy.book.id}" />
        <button class="btn btn-primary" type="submit">Save</button>
        <a class="btn btn-secondary" th:href="@{'/copies?bookId=' + ${copy.book.id}}">Cancel</a>
    </form>
</div>
<div th:replace="fragments/footer :: footer"></div>
</body>
</html>